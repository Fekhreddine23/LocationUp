<div class="notification-container">
  <!-- Badge/Bouton de d√©clenchement -->
  <div class="notification-trigger" (click)="toggleNotificationPanel()">
    <span class="notification-icon">üîî</span>
    <span *ngIf="unreadCount > 0" class="notification-badge">
      {{ unreadCount > 99 ? '99+' : unreadCount }}
    </span>
  </div>

  <!-- Panneau des notifications -->
  <div *ngIf="isPanelOpen" class="notification-panel">
    <div class="panel-header">
      <h3>Notifications</h3>
      <div class="panel-actions">
        <button *ngIf="unreadCount > 0" 
                class="btn-mark-all-read" 
                (click)="markAllAsRead()"
                title="Tout marquer comme lu">
          ‚úì Tout lire
        </button>
        <button class="btn-clear" 
                (click)="clearNotifications()"
                title="Effacer toutes les notifications">
          üóëÔ∏è
        </button>
        <button class="btn-close" (click)="toggleNotificationPanel()">√ó</button>
      </div>
    </div>

    <div class="notification-list">
      <!-- √âtat de chargement -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Chargement des notifications...</p>
      </div>

      <!-- Liste vide -->
      <div *ngIf="!isLoading && notifications.length === 0" class="empty-state">
        <div class="empty-icon">üì≠</div>
        <p>Aucune notification</p>
        <small>Toutes vos notifications appara√Ætront ici</small>
      </div>

      <!-- Liste des notifications -->
      <div *ngFor="let notification of notifications" 
           [class]="getNotificationClass(notification)"
           [class.unread]="!notification.read">
        
        <div class="notification-content">
          <div class="notification-header">
            <span class="notification-type-icon">
              {{ getNotificationIcon(notification) }}
            </span>
            <span class="notification-title" [title]="notification.title">
              {{ notification.title || 'Notification' }}
            </span>
            <span class="notification-time">
              {{ notification.timestamp | date:'HH:mm' }}
            </span>
          </div>
          
          <div class="notification-message">
            {{ notification.content }}
          </div>

          <div *ngIf="notification.metadata" class="notification-metadata">
            <!-- Affichage des m√©tadonn√©es si pr√©sentes -->
          </div>
        </div>

        <div class="notification-actions">
          <button *ngIf="!notification.read" 
                  class="btn-mark-read"
                  (click)="markAsRead(notification)"
                  title="Marquer comme lu">
            ‚úì
          </button>
          <button class="btn-dismiss"
                  (click)="removeNotification(notification)"
                  title="Supprimer">
            √ó
          </button>
        </div>
      </div>
    </div>

    <!-- Boutons de test (√† retirer en production) -->
    <div class="test-buttons">
      <small>Tests :</small>
      <button (click)="sendCustomTest('success')" class="test-btn success">‚úÖ</button>
      <button (click)="sendCustomTest('error')" class="test-btn error">‚ùå</button>
      <button (click)="sendCustomTest('warning')" class="test-btn warning">‚ö†Ô∏è</button>
      <button (click)="sendCustomTest('info')" class="test-btn info">‚ÑπÔ∏è</button>
    </div>
  </div>
</div>
