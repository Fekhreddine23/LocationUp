<header class="header">
  <nav class="nav">
    <div class="logo">
      <a routerLink="/">LocationUp</a>
    </div>
    <button 
      type="button" 
      class="mobile-menu-toggle" 
      (click)="toggleMobileMenu()" 
      [attr.aria-expanded]="isMobileMenuOpen"
      aria-label="Menu principal">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav-links" [class.open]="isMobileMenuOpen">
      <a routerLink="/" class="nav-link" (click)="closeMobileMenu()">Accueil</a>

      <ng-container *ngIf="!isLoggedIn; else userMenu">
        <a routerLink="/login" class="nav-link" (click)="closeMobileMenu()">Connexion</a>
        <a routerLink="/register" class="nav-link button" (click)="closeMobileMenu()">Inscription</a>
      </ng-container>

      <ng-template #userMenu>
        <a [routerLink]="dashboardRoute" class="nav-link" (click)="closeMobileMenu()">
          {{ isAdmin ? 'Admin' : 'Dashboard' }}
        </a>
        <a [routerLink]="offersRoute" class="nav-link" (click)="closeMobileMenu()">Offres</a>
        <a [routerLink]="bookingsRoute" class="nav-link" (click)="closeMobileMenu()">R√©servations</a>

        <!-- ‚úÖ INT√âGRATION DE LA NOTIFICATION -->
        <app-notification></app-notification>

        <div class="user-menu">
          <button class="user-btn" (click)="toggleMenu()">
            üë§ {{ currentUser?.username }}
          </button>

          <div class="dropdown-menu" *ngIf="isMenuOpen">
            <a routerLink="/profile" class="dropdown-item">Mon Profil</a>
            <button (click)="logout()" class="dropdown-item logout">D√©connexion</button>
          </div>
        </div>

         <!-- AJOUT DU BOUTON DE BASCULEMENT DU TH√àME -->
        <button class="theme-toggle" (click)="toggleTheme()"
          [title]="isDarkMode ? 'Passer en mode clair' : 'Passer en mode sombre'">
          <span class="theme-icon" [class.dark]="isDarkMode">
            {{ isDarkMode ? 'üåô' : '‚òÄÔ∏è' }}
          </span>
        </button>
      </ng-template>
    </div>
  </nav>
</header>
