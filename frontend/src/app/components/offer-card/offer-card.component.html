<div class="app-offer-card">
  <div class="offer-visual">
    <img
      [src]="getOfferImage(offer)"
      [alt]="offer.description || 'Offre de mobilitÃ©'"
      loading="eager"
    />
    <span class="visual-chip">
      {{ getOfferCategoryLabel(offer) }}
    </span>
    <button 
      class="favorite-btn" 
      type="button"
      [attr.aria-pressed]="isFavorite"
      (click)="onToggleFavorite($event)">
      <span class="material-icon" [class.is-favorite]="isFavorite">â¤</span>
    </button>
  </div>

  <div class="offer-header">
    <h3 (click)="onQuickDetails($event)">{{ offer.description || 'Offre #' + offer.offerId }}</h3>
    <span class="price">{{ formatPrice(offer.price) }}</span>
  </div>

  <div class="offer-content">
    <p class="description" *ngIf="offer.description">{{ offer.description }}</p>
    
    <div class="offer-details">
      <div class="detail">
        <strong>ğŸ“ DÃ©part:</strong> {{ getPickupLabel(offer) }}
      </div>
      <div class="detail">
        <strong>ğŸ¯ Retour:</strong> {{ getReturnLabel(offer) }}
      </div>
      <div class="detail">
        <strong>ğŸ“… Date:</strong> {{ formatDate(offer.pickupDatetime) }}
      </div>
      <div class="detail">
        <strong>ğŸš— Service:</strong> {{ offer.mobilityServiceName || offer.mobilityService || ('Service #' + offer.mobilityServiceId) }}
      </div>
      <div class="detail" *ngIf="offer.adminName">
        <strong>ğŸ‘¤ CrÃ©Ã©e par:</strong> {{ offer.adminName }}
      </div>
    </div>

    <!-- Statut de l'offre -->
    <div class="offer-status">
      <span [class]="'status-badge ' + getStatusClass(offer.status)">
        {{ getStatusText(offer.status) }}
      </span>
      <span *ngIf="isOfferConfirmed(offer)" class="active-indicator">ğŸŸ¢ ConfirmÃ©e</span>
      <span *ngIf="!isOfferConfirmed(offer)" class="inactive-indicator">ğŸ”´ Non confirmÃ©e</span>
    </div>
  </div>

  <div class="offer-actions">
    <button 
      class="btn btn-primary" 
      (click)="onReserve()"
      [disabled]="!isOfferConfirmed(offer)">
      ğŸš— RÃ©server
    </button>
    
    <div class="action-pair">
      <button 
        class="btn btn-secondary" 
        type="button"
        (click)="viewOfferDetails(offer.offerId)">
        ğŸ“‹ DÃ©tails
      </button>
      <button
        class="btn btn-ghost"
        type="button"
        [attr.aria-pressed]="quickViewActive"
        (click)="onQuickDetails($event)">
        {{ quickViewActive ? 'Fermer l\'aperÃ§u' : 'ğŸ” AperÃ§u' }}
      </button>
    </div>
  </div>
</div>
