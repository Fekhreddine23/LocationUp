<app-breadcrumbs [items]="breadcrumbItems"></app-breadcrumbs>

<section class="support-page">
  <header class="page-header surface-panel">
    <div>
      <p class="eyebrow">Aide & assistance</p>
      <h1>Contacter le support LocationUp</h1>
      <p class="subtitle">Expliquez votre besoin et nous reviendrons vers vous rapidement.</p>
    </div>
  </header>

  <div class="surface-panel">
    <form [formGroup]="supportForm" (ngSubmit)="submit()" novalidate class="support-form">
      <div class="form-grid">
        <label [class.invalid]="supportForm.get('subject')?.touched && supportForm.get('subject')?.invalid">
          <span>Sujet</span>
          <input type="text" formControlName="subject" placeholder="Ex: Probl√®me de paiement" />
          <small class="field-error"
                 *ngIf="supportForm.get('subject')?.touched && supportForm.get('subject')?.invalid">
            Le sujet doit contenir au moins 5 caract√®res.
          </small>
        </label>

        <label>
          <span>Cat√©gorie</span>
          <select formControlName="category">
            <option value="GENERAL">Question g√©n√©rale</option>
            <option value="OFFER">Offre / disponibilit√©</option>
            <option value="BOOKING">R√©servation</option>
            <option value="PAYMENT">Paiement / remboursement</option>
            <option value="TECH">Support technique</option>
          </select>
        </label>

        <label>
          <span>R√©f√©rence (offre ou r√©servation)</span>
          <input type="text" formControlName="relatedId" placeholder="Ex: Offre #42" />
        </label>

        <label>
          <span>Niveau d'urgence</span>
          <select formControlName="urgency">
            <option value="normal">Normal</option>
            <option value="urgent">Urgent</option>
          </select>
        </label>

        <label [class.invalid]="supportForm.get('contactEmail')?.touched && supportForm.get('contactEmail')?.invalid">
          <span>Email de contact (optionnel)</span>
          <input type="email" formControlName="contactEmail" placeholder="vous@email.com" />
          <small class="field-error"
                 *ngIf="supportForm.get('contactEmail')?.touched && supportForm.get('contactEmail')?.invalid">
            Merci de renseigner un email valide.
          </small>
        </label>
      </div>

      <label class="message-field"
             [class.invalid]="supportForm.get('message')?.touched && supportForm.get('message')?.invalid">
        <span>D√©taillez votre demande</span>
        <textarea rows="6" formControlName="message" placeholder="Expliquez votre besoin..."></textarea>
        <small class="field-error"
               *ngIf="supportForm.get('message')?.touched && supportForm.get('message')?.invalid">
          Votre message doit d√©crire le probl√®me (minimum 20 caract√®res).
        </small>
      </label>

      <div class="form-actions">
        <button class="btn btn-primary" type="submit" [disabled]="isSubmitting || supportForm.invalid">
          {{ isSubmitting ? 'Envoi en cours...' : 'Envoyer la demande' }}
        </button>
        <p class="muted">Un ticket interne sera cr√©√© pour notre √©quipe support.</p>
      </div>
    </form>

    <div *ngIf="submitSuccess" class="alert alert-success" role="status">
      ‚úÖ Votre demande a bien √©t√© transmise. Nous reviendrons vers vous rapidement.
    </div>

    <div *ngIf="submitError" class="alert alert-error" role="alert">
      {{ submitError }}
    </div>
  </div>

  <aside class="surface-panel faq-panel">
    <h2>FAQ rapide</h2>
    <ul>
      <li>üîÅ Relancer un paiement : via le bouton d√©di√© sur votre r√©servation.</li>
      <li>üí≥ Remboursement : comptez 3 √† 5 jours ouvr√©s via Stripe.</li>
      <li>üìÖ Modifier une sortie : contactez-nous en pr√©cisant le num√©ro de r√©servation.</li>
    </ul>
  </aside>
</section>
